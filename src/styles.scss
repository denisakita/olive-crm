/* You can add global styles to this file, and also import other style files */
@use '@angular/material' as mat;

/* Global Color Palette */
:root {
  /* Primary Colors - Olive Theme */
  --dark-moss-green: #606c38ff;
  --pakistan-green: #283618ff;
  --moss-green: #93987cff;
  --cornsilk: #fefae0ff;
  --sunset: #eece9fff;
  --earth-yellow: #dda15eff;
  --tigers-eye: #bc6c25ff;

  /* Additional utility colors */
  --text-primary: var(--pakistan-green);
  --text-secondary: var(--dark-moss-green);
  --background-primary: var(--cornsilk);
  --background-secondary: #ffffff;
  --accent: var(--earth-yellow);
  --warn: var(--tigers-eye);
  --success: var(--dark-moss-green);
  --info: var(--moss-green);
  --border-color: #e0e0e0;
  --shadow-color: rgba(40, 54, 24, 0.1);
}

/* Define Material Design 3 theme */
$olive-primary: (
  50: #f0f4e8,
  100: #d9e2c6,
  200: #c0cea0,
  300: #a6ba7a,
  400: #93ac5e,
  500: #606c38,
  600: #576232,
  700: #4c552b,
  800: #424924,
  900: #283618,
  A100: #c5ff7f,
  A200: #a8ff4c,
  A400: #8bff19,
  A700: #7dff00,
  contrast: (
    50: rgba(black, 0.87),
    100: rgba(black, 0.87),
    200: rgba(black, 0.87),
    300: rgba(black, 0.87),
    400: rgba(black, 0.87),
    500: white,
    600: white,
    700: white,
    800: white,
    900: white,
    A100: rgba(black, 0.87),
    A200: rgba(black, 0.87),
    A400: rgba(black, 0.87),
    A700: rgba(black, 0.87),
  )
);

$olive-accent: (
  50: #fdf8f2,
  100: #faeede,
  200: #f6e3c8,
  300: #f2d7b1,
  400: #efcfa0,
  500: #dda15e,
  600: #d49655,
  700: #c8894b,
  800: #bd7c41,
  900: #ac6630,
  A100: #fff3e0,
  A200: #ffe0b2,
  A400: #ffcc80,
  A700: #ffb74d,
  contrast: (
    50: rgba(black, 0.87),
    100: rgba(black, 0.87),
    200: rgba(black, 0.87),
    300: rgba(black, 0.87),
    400: rgba(black, 0.87),
    500: rgba(black, 0.87),
    600: rgba(black, 0.87),
    700: white,
    800: white,
    900: white,
    A100: rgba(black, 0.87),
    A200: rgba(black, 0.87),
    A400: rgba(black, 0.87),
    A700: rgba(black, 0.87),
  )
);

$olive-warn: (
  50: #f8ede7,
  100: #edd1c3,
  200: #e2b39b,
  300: #d69473,
  400: #cd7d55,
  500: #bc6c25,
  600: #b06221,
  700: #9f551c,
  800: #8f4917,
  900: #71350e,
  A100: #ffc4a3,
  A200: #ff9e70,
  A400: #ff783d,
  A700: #ff6524,
  contrast: (
    50: rgba(black, 0.87),
    100: rgba(black, 0.87),
    200: rgba(black, 0.87),
    300: rgba(black, 0.87),
    400: white,
    500: white,
    600: white,
    700: white,
    800: white,
    900: white,
    A100: rgba(black, 0.87),
    A200: rgba(black, 0.87),
    A400: white,
    A700: white,
  )
);

$olive-primary-palette: mat.m2-define-palette($olive-primary, 500, 300, 700);
$olive-accent-palette: mat.m2-define-palette($olive-accent, 500, 300, 700);
$olive-warn-palette: mat.m2-define-palette($olive-warn, 500, 300, 700);

$olive-theme: mat.m2-define-light-theme((
  color: (
    primary: $olive-primary-palette,
    accent: $olive-accent-palette,
    warn: $olive-warn-palette,
  ),
  typography: mat.m2-define-typography-config(),
  density: 0,
));

@include mat.all-component-themes($olive-theme);

html, body { 
  height: 100%; 
  background-color: var(--background-primary);
}

body { 
  margin: 0; 
  font-family: Roboto, "Helvetica Neue", sans-serif;
  color: var(--text-primary);
}

/* Global utility classes */
.bg-primary { background-color: var(--dark-moss-green) !important; }
.bg-secondary { background-color: var(--pakistan-green) !important; }
.bg-accent { background-color: var(--earth-yellow) !important; }
.bg-light { background-color: var(--cornsilk) !important; }
.bg-moss { background-color: var(--moss-green) !important; }
.bg-sunset { background-color: var(--sunset) !important; }
.bg-warn { background-color: var(--tigers-eye) !important; }

.text-primary { color: var(--dark-moss-green) !important; }
.text-secondary { color: var(--pakistan-green) !important; }
.text-accent { color: var(--earth-yellow) !important; }
.text-light { color: var(--cornsilk) !important; }
.text-moss { color: var(--moss-green) !important; }
.text-sunset { color: var(--sunset) !important; }
.text-warn { color: var(--tigers-eye) !important; }

/* Override Material default colors */
.mat-mdc-raised-button.mat-primary {
  background-color: var(--dark-moss-green) !important;
}

.mat-mdc-raised-button.mat-accent {
  background-color: var(--earth-yellow) !important;
}

.mat-mdc-raised-button.mat-warn {
  background-color: var(--tigers-eye) !important;
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  background: var(--background-primary);
}

::-webkit-scrollbar-thumb {
  background: var(--moss-green);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: var(--dark-moss-green);
}

/* Fix for CDK overlay issues */
.cdk-overlay-container {
  z-index: 1050 !important;
  pointer-events: none;
}

.cdk-overlay-backdrop {
  pointer-events: auto;
}

.cdk-overlay-pane {
  pointer-events: auto;
}

/* Ensure profile content is visible */
.profile-container {
  position: relative;
  z-index: 1;
}

/* Fix stuck overlays */
.cdk-overlay-container:empty {
  display: none !important;
}

/* Dark Theme Mixin */
@mixin dark-theme-styles {
  --text-primary: #f5f5f5;
  --text-secondary: #b0b0b0;
  --background-primary: #1a1a1a;
  --background-secondary: #2d2d2d;
  --accent: var(--earth-yellow);
  --warn: var(--tigers-eye);
  --success: #4caf50;
  --info: var(--moss-green);
  --border-color: #404040;
  --shadow-color: rgba(0, 0, 0, 0.3);
  
  background-color: var(--background-primary);
  color: var(--text-primary);
  
  /* Material components dark theme overrides */
  .mat-toolbar {
    background-color: #212121 !important;
    color: var(--text-primary) !important;
  }
  
  .mat-sidenav {
    background-color: var(--background-secondary) !important;
    color: var(--text-primary) !important;
  }
  
  .mat-sidenav-content {
    background-color: var(--background-primary) !important;
    color: var(--text-primary) !important;
  }
  
  .mat-card {
    background-color: var(--background-secondary) !important;
    color: var(--text-primary) !important;
    border: 1px solid var(--border-color);
  }
  
  .mat-expansion-panel {
    background-color: var(--background-secondary) !important;
    color: var(--text-primary) !important;
    
    .mat-expansion-panel-header {
      background-color: var(--background-secondary) !important;
      color: var(--text-primary) !important;
      
      &:hover {
        background-color: #3a3a3a !important;
      }
    }
  }
  
  .mat-form-field {
    .mat-form-field-label {
      color: var(--text-secondary) !important;
    }
    
    .mat-form-field-underline {
      background-color: var(--border-color) !important;
    }
    
    .mat-input-element {
      color: var(--text-primary) !important;
      caret-color: var(--text-primary) !important;
    }
    
    &.mat-form-field-appearance-outline {
      .mat-form-field-outline {
        color: var(--border-color) !important;
      }
      
      .mat-form-field-outline-thick {
        color: var(--accent) !important;
      }
    }
  }
  
  .mat-select {
    .mat-select-value {
      color: var(--text-primary) !important;
    }
    
    .mat-select-arrow {
      color: var(--text-secondary) !important;
    }
  }
  
  .mat-option {
    background-color: var(--background-secondary) !important;
    color: var(--text-primary) !important;
    
    &:hover {
      background-color: #3a3a3a !important;
    }
    
    &.mat-selected {
      background-color: rgba(96, 108, 56, 0.2) !important;
    }
  }
  
  .mat-button, .mat-raised-button, .mat-flat-button, .mat-stroked-button {
    &:not(.mat-primary):not(.mat-accent):not(.mat-warn) {
      color: var(--text-primary) !important;
    }
  }
  
  .mat-slide-toggle {
    .mat-slide-toggle-content {
      color: var(--text-primary) !important;
    }
  }
  
  .mat-divider {
    background-color: var(--border-color) !important;
  }
  
  .mat-list-item {
    color: var(--text-primary) !important;
    
    &:hover {
      background-color: rgba(255, 255, 255, 0.05) !important;
    }
    
    &.active-link {
      background-color: rgba(96, 108, 56, 0.2) !important;
    }
  }
  
  .mat-menu-panel {
    background-color: var(--background-secondary) !important;
    
    .mat-menu-item {
      color: var(--text-primary) !important;
      
      &:hover {
        background-color: rgba(255, 255, 255, 0.05) !important;
      }
    }
  }
  
  .mat-table {
    background-color: var(--background-secondary) !important;
    
    .mat-header-cell {
      color: var(--text-primary) !important;
      border-bottom-color: var(--border-color) !important;
    }
    
    .mat-cell {
      color: var(--text-primary) !important;
      border-bottom-color: var(--border-color) !important;
    }
    
    .mat-row:hover {
      background-color: rgba(255, 255, 255, 0.03) !important;
    }
  }
  
  .mat-paginator {
    background-color: var(--background-secondary) !important;
    color: var(--text-primary) !important;
  }
  
  .mat-tab-group {
    .mat-tab-label {
      color: var(--text-secondary) !important;
      
      &.mat-tab-label-active {
        color: var(--text-primary) !important;
      }
    }
  }
  
  .mat-dialog-container {
    background-color: var(--background-secondary) !important;
    color: var(--text-primary) !important;
  }
  
  .mat-snack-bar-container {
    background-color: #424242 !important;
    color: var(--text-primary) !important;
  }
  
  .mat-progress-spinner circle,
  .mat-spinner circle {
    stroke: var(--accent) !important;
  }
  
  .mat-progress-bar {
    .mat-progress-bar-buffer {
      background-color: rgba(96, 108, 56, 0.2) !important;
    }
    
    .mat-progress-bar-fill::after {
      background-color: var(--dark-moss-green) !important;
    }
  }
  
  /* Custom component styles for dark theme */
  .settings-container {
    background-color: var(--background-primary) !important;
    color: var(--text-primary) !important;
    
    .settings-header {
      h1 {
        color: var(--text-primary) !important;
      }
      
      .subtitle {
        color: var(--text-secondary) !important;
      }
    }
    
    .settings-section {
      background-color: var(--background-secondary) !important;
      
      h3 {
        color: var(--text-primary) !important;
      }
    }
    
    .storage-info {
      p {
        color: var(--text-primary) !important;
      }
    }
  }
  
  .profile-container {
    background-color: var(--background-primary) !important;
    color: var(--text-primary) !important;
    
    .profile-header {
      background: linear-gradient(135deg, #2d2d2d 0%, #1a1a1a 100%) !important;
      
      h1, h2 {
        color: var(--text-primary) !important;
      }
    }
  }
  
  /* Dashboard cards */
  .dashboard-card {
    background-color: var(--background-secondary) !important;
    color: var(--text-primary) !important;
    border: 1px solid var(--border-color) !important;
  }
  
  /* Scrollbar styling for dark theme */
  ::-webkit-scrollbar-track {
    background: var(--background-secondary);
  }
  
  ::-webkit-scrollbar-thumb {
    background: #555;
    
    &:hover {
      background: #666;
    }
  }
}

/* Dark Theme Styles */
body.dark-theme {
  @include dark-theme-styles;
}

/* Light Theme (explicit) */
body.light-theme {
  background-color: #fafafa;
  color: var(--text-primary);
}

/* Auto Theme - follows system preference */
@media (prefers-color-scheme: dark) {
  body.auto-theme {
    @include dark-theme-styles;
  }
}

@media (prefers-color-scheme: light) {
  body.auto-theme {
    background-color: #fafafa;
    color: var(--text-primary);
  }
}
